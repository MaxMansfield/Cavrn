<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Cavrn AVR8 Library: Uart.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cavrn AVR8 Library
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Sedimentary Olm</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Uart.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Uart_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# UART</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#### A library implementation for sending/recieving bytes or strings via UART pins. </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;### Configuration</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Uart is able to take advantage of all modes given by an MCU. Just provide it during initialization.</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;*note: The AVR ATmega103 does not have available status control registers to determine half/full duplex so no mode is needed at initialization.*</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;~~~~~~~~~~~~~~~~~~~~{.c}</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;Uart.init(ASYNC_MODE)</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;or</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;Uart.init(SYNC_MODE)</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;or</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;Uart.init(MSPI_MODE)</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;~~~~~~~~~~~~~~~~~~~~</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;Uart relies on a BAUD definition at compile time because many preprocessor directives rely on it; one benefit of doing it this way is that no large 32bit integers have to be used (ex. Baud of 115200) another is the assurance that your baud rate is what you would expect throughout the program and finally no compute time is wasted on arithmatic to calculate baud rates or `F_OSC` clock rates or even to separate high and low values for the USART Baud Rate Register because the preprocessor computes it.</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;To Define the Baud rate add -DBAUD=9600 or any other rate to the compilation. For most situations, simply fill in the provided `settings.inc` file. During the extent of your program you can change the BAUD by undefining BAUD and redefining it before reincluding the `&lt;util/setbaud.h&gt;` file. This sounds janky but the setbaud.h file is simply a collection of preprocessor directives which will only be present at compile time and infact avr-libc recommends this way.</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;Take this example to see how easy to use the Uart library is (and eventually all of Cavrn).</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;~~~~~~~~~~~~~~~~~~~~{.c}</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;#include &quot;Cavrn/uart.h&quot;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;int main(void)</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  Uart.init(ASYNC_MODE);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  Uart.txString(&quot;Device Initialized\n\r&quot;);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  while(1){</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    uint8_t recieved = Uart.rxByte();</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    char text[128];</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    sprintf(text,&quot;Devices Recieved Data: %d\n\rAnalyzing...&quot;,recieved);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    Uart.txString(text);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;   }</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  return 0;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;~~~~~~~~~~~~~~~~~~~~</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Feb 19 2015 20:00:21 for Cavrn AVR8 Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
